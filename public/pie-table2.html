<!-- https://github.com/gencay/stackedGroupedChart -->
<!-- http://www.somersault1824.com/tips-for-designing-scientific-figures-for-color-blind-readers/ -->
<!-- https://www.easycalculation.com/colorconverter/rgb-color-converter.php -->

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Ridesharing Apps by Geographic Area</title>
<style>

body {
  font: 10px sans-serif;
}

.arc path {
  stroke: #fff;
}

table {
  border-collapse: collapse;
}

table, th, td {
  border: 1px solid black;
}

td {
  text-align: center;
  width: 220px;
  height: 220px;
}

</style>
</head>

<body>

  <table>
      <thead>
          <tr>
              <th></th>
              <th>January</th>
              <th>February</th>
              <th>March</th>
              <th>April</th>
              <th>May</th>
          </tr>
      </thead>

      <tbody>
          <tr class="usa">
              <td class="geo">USA</td>
              <td class="jan"></td>
              <td class="feb"></td>
              <td class="mar"></td>
              <td class="april"></td>
              <td class="may"></td>
          </tr>
          <tr class="india">
              <td class="geo">India</td>
              <td class="jan"></td>
              <td class="feb"></td>
              <td class="mar"></td>
              <td class="april"></td>
              <td class="may"></td>
          </tr>
          <tr class="asia">
              <td class="geo">Asia</td>
              <td class="jan"></td>
              <td class="feb"></td>
              <td class="mar"></td>
              <td class="april"></td>
              <td class="may"></td>
          </tr>

      </tbody>
  </table>


<script src="https://d3js.org/d3.v3.min.js"></script>
<script>


var foo = [{
  month: 'jan',
  X: 10,
  NonX: 100
},{
  month: 'feb',
  X: 240,
  NonX: 200
}];

foo.forEach(function(d){

  var svg = d3.select('.india .' + d.month)
    .append('svg')
    .attr('width', d.X + d.NonX)
    .attr('height', d.X + d.NonX);

  var arc = d3.svg.arc().innerRadius(0).outerRadius(20),
      pie = d3.layout.pie()
        .value(function(d){ return d }),
      color = d3.scale.category10();

  var pies = svg.selectAll('.pie')
    .data(foo)
    .enter()
    .append('g')
    .attr('class', 'pie')
    .attr('transform',function(d,i){
      return 'translate(' + 20 + ',' + (i + 1) * 40 + ')';
    })

  pies
    .selectAll('.slice')
    .data(function(d){
      return pie([d.X, d.NonX]);
    })
    .enter()
    .append('path')
    .attr('d',  arc)
    .style('fill', function(d,i){
      return color(i);
    });

})


</script>
</body>
</html>